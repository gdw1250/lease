<!doctype html>
<html lang="zh-CN">

<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Home</title>
<meta name="keywords" content="">
<meta name="description" content="">
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/nprogress.css">
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="css/sty.css">

<link rel="stylesheet" type="text/css" href="css/bootstrapValidator.css">
<link rel="stylesheet" type="text/css" href="css/cropper.css">
<link rel="stylesheet" type="text/css" href="css/personalstyle.css">
<link rel="apple-touch-icon-precomposed" href="images/icon.png">
<link rel="shortcut icon" href="images/favicon.ico">

<script src="js/jquery-2.1.4.min.js"></script>
<script src="js/nprogress.js"></script>
<script src="js/jquery.lazyload.min.js"></script>

<!--[if gte IE 9]>
  <script src="js/jquery-1.11.1.min.js" type="text/javascript"></script>
  <script src="js/html5shiv.min.js" type="text/javascript"></script>
  <script src="js/respond.min.js" type="text/javascript"></script>
  <script src="js/selectivizr-min.js" type="text/javascript"></script>
<![endif]-->
<!--[if lt IE 9]>
  <script>window.location.href='upgrade-browser.html';</script>
<![endif]-->
</head>

<body class="user-select">
	<header class="header">
		<nav class="navbar navbar-default" id="navbar">
			<div class="container">

				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed"
						data-toggle="collapse" data-target="#header-navbar"
						aria-expanded="false">
						<span class="sr-only"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span> <span class="icon-bar"></span>
					</button>
					<h1 class="logo hvr-bounce-in">
						<a ><img
							src="images/201610171329086541.png" ></a>
					</h1>
				</div>
				<div class="collapse navbar-collapse" id="header-navbar">
					<form class="navbar-form visible-xs" action="/Search" method="post">
						<div class="input-group">
							<input type="text" name="keyword" class="form-control"
								placeholder="请输入关键字" maxlength="20" autocomplete="off">
							<span class="input-group-btn">
								<button class="btn btn-default btn-search" name="search"
									type="submit">搜索</button>
							</span>
						</div>
					</form>
					<ul class="nav navbar-nav navbar-left">
						<li><a href="/index">首页</a></li>


						<li><a title="个人信息" href="#">个人信息</a></li>
						
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li><a href="/cancel">注销</a></li>
						<li><a class="hidden-xs"><img class="img-circle pull-right" src="images/1.jpg" alt="" style="width: 40px;height:40px ;margin: 10px;" th:attr="src=${session.user.image}"></a></li>
					</ul>
					
				</div>
			</div>
		</nav>
	</header>


	<div class="container">
		<div class="row">
			<!-- Nav tabs -->

			<div class="list-group col-md-3" id="headImgDiv">

				<div class="own-info" id="personalhead" th:fragment="personalhead">
					<a th:onClick="updataheadModalShow()"><img class="img-circle img_width_own" src="images//1.jpg"  th:attr="src=${session.user.image}"></a>
						 <span class="form-inline" th:text="${session.user.username}">名称</span>
				</div>



				<a href="#information" class="list-group-item"
					aria-controls="information" role="tab" data-toggle="tab">个人信息</a> 
					<a
					href="#burse" class="list-group-item" aria-controls="burse"
					role="tab" data-toggle="tab">钱包</a> 
					<a href="#manageGoods"
					class="list-group-item" aria-controls="manageGoods" role="tab"
					data-toggle="tab">物品管理</a> 
					<a href="#record" id="history" class="list-group-item" aria-controls="record" role="tab"
					data-toggle="tab"  th:onclick="getborrows([[${session.user.username}]])">租赁记录</a>
			</div>

			<!-- Tab panes -->
			<div class="tab-content col-md-9">
				<div role="tabpanel" class="tab-pane active" id="information">
					<h2>个人信息</h2>
					<hr />
					

					<form class="form-horizontal" id="personal">
						<div class="form-group">

							<div class="col-sm-8">
								<input type="hidden" class="form-control" name="userid"
									th:attr="value=${session.user.userid}" id="userid">
							</div>
						</div>


						<div class="form-group">
							<label for="inputname" class="col-sm-2 control-label">用户名</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" name="username"
									th:attr="value=${session.user.username}">
							</div>
						</div>



						<div class="form-group">
							<label for="inputnickname" class="col-sm-2 control-label">email</label>
							<div class="col-sm-8">
								<input type="email" class="form-control" id="inputnickname"
									name="email" th:attr="value=${session.user.email}">
							</div>
						</div>

						<div class="form-group">
							<label for="inputtel" class="col-sm-2 control-label">电话</label>
							<div class="col-sm-8">
								<input type="tel" class="form-control" name="tel"
									placeholder="tel" th:attr="value=${session.user.tel}">
							</div>
						</div>

						<div class="form-group">
							<label for="inputtel" class="col-sm-2 control-label">地址</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" name="address"
									placeholder="地址" th:attr="value=${session.user.address}">
							</div>
						</div>

						<div class="form-group">
							<div class="">
								<button type="submit" class="btn btn-info center-block"
									id="savebtn">保存</button>
							</div>
						</div>
					</form>

				</div>

				<div role="tabpanel" class="tab-pane" id="burse">
					<div th:fragment="usermoney">
						<h2>钱包</h2>
						<hr/>
						<label class="control-label">余额：[[${session.user.money}]] <span>RMB</span></label>
						<button class="btn btn-info" th:onClick="showChargeModal()">充值</button>
					</div>
				</div>
				
				<!-- 充值 -->
				
				<div class="modal fade" tabindex="-1" role="dialog" id="chargeModal"> 
				  <div class="modal-dialog" role="document">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				        <h4 class="modal-title">充值</h4>
				      </div>
				      <div class="modal-body">
				       		 <form class="form-horizontal" id="chargeFrom" method="post" action="/charge">
					                  
					
					                    <div class="form-group">
					                           <label for="inputtel" class="col-xs-3 control-label">编号</label>
					                           <div class=" input-group col-xs-7">
					                             <input type="text" class="form-control" name="billid" readonly="readonly">
					                             
					                           </div>
					                   </div>
					                   
					                  <div class="form-group">
					                           <label for="inputtel" class="col-xs-3 control-label">标题</label>
					                           <div class=" input-group col-xs-7">
					                             <input type="text" class="form-control" name="subject" readonly="readonly" value="账户充值">
					                             
					                           </div>
					                   </div>
					                   <div class="form-group">
					                           <label for="inputtel" class="col-xs-3 control-label">用户</label>
					                           <div class="input-group col-xs-7">
					                             <input type="text" class="form-control" name="username" readonly="readonly" th:attr="value=${session.user.username}"> 
					                           </div>
					                   </div>
					              		<div class="form-group">
					                           <label for="inputtel" class="col-xs-3 control-label">金额</label>
					                           <div class="input-group col-xs-7">
					                             <input type="text" class="form-control" name="amount"> 
					                           </div>
					                   </div>
					                   <div class="form-group">
					                     <div >
					                       <button type="submit" class="btn btn-info center-block"  >确定</button>
					                     </div>
					                   </div>
					                 </form>
					                   
					        
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				      </div>
				    </div><!-- /.modal-content -->
				  </div><!-- /.modal-dialog -->
				</div><!-- /.modal -->
				<!-- 充值 -->

				<!-- 物品管理 -->
				<div role="tabpanel" class="tab-pane" id="manageGoods">
					

					  <!-- Nav tabs -->
					  <ul class="nav nav-tabs" role="tablist">
					    <li role="presentation" class="active"><a href="#goodsUp" aria-controls="goodsUp" role="tab" data-toggle="tab">上架物品</a></li>
					    <li role="presentation"><a href="#historyGoods" aria-controls="historyGoods" role="tab" data-toggle="tab"  th:onclick="getGoods([[${session.user.username}]])">上架历史</a></li>
					   
					  </ul>
					
					  <!-- Tab panes -->
					  <div class="tab-content">
					  <!-- 物品上架 -->
					    <div role="tabpanel" class="tab-pane active" id="goodsUp">
						    <div class="row">
						    	<div class="col-sm-4">
						    		<div class="previewimg center-block" id="cropimg"></div>
						    		<br>
						    		<button type="button" class="btn btn-primary center-block"  id="showmodal" th:onClick="showmodal()">选择图片</button>  
						    	</div>
						    	<br>
						    	<div class="col-sm-6">
						    		  <form class="form-horizontal" id="upgoodsform">
					                   <div class="form-group">
					                     <label for="inputname2" class="col-xs-3 control-label">标题</label>
					                     <div class=" input-group col-xs-8">
					                       <input type="text" class="form-control " name="goodname" id="upgoodsname">
					                     </div>
					                   </div>
					
					                    <div class="form-group">
					                           <label for="inputtel" class="col-xs-3 control-label">价格</label>
					                           <div class=" input-group col-xs-8">
					                             <input type="text" class="form-control" name="price" id="upprice"  placeholder="元/小时">

					                           </div>
					                           
					                   </div>
					              		<div class="form-group">
					                           <label for="inputtel" class="col-xs-3 control-label">数量</label>
					                           <div class="input-group col-xs-8">
					                             <input type="text" class="form-control" name="goodsnumber" id="upgoodsnumber"> 
					                           </div>
					                   </div>
					                   <div class="form-group">
					                           <label for="inputtel" class="col-xs-3 control-label">押金</label>
					                           <div class="input-group col-xs-8">
					                             <input type="text" class="form-control" name="deposit" id="deposit"> 
					                           </div>
					                   </div>
					                   <div class="form-group">
					                           <label for="inputtel" class="col-xs-3 control-label">描述</label>
					                           <div class="input-group col-xs-8">
					                            <textarea class="form-control" rows="3" name="detail" id = "updetail"></textarea>
					                           </div>
					                   </div>
					                   
					                 	<div class="form-group">
				                           <div class="col-sm-8 input-group">
				                             <input type="hidden" class="form-control" name="username" th:attr="value=${session.user.username}" id="upgoodsusername"> 
				                           </div>
					                   </div>
					                   <div class="form-group">
				                           <div class="col-sm-8 input-group">
				                             <input type="hidden" class="form-control" name="username" th:attr="value=${session.user.userid}" id="upgoodsuserid"> 
				                           </div>
					                   </div>
					                   
					                   <div class="form-group">
					                     <div class="col-sm-offset-3 col-sm-8">
					                       <button type="button" class="btn btn-info center-block" id="upgoodsbtn">上传</button>
					                     </div>
					                   </div>
					                 </form>
						    	</div>
						    </div>
					    	
					    </div>
					    <!-- 上架物品管理 -->
					    <div role="tabpanel" class="tab-pane" id="historyGoods" >
					    <div th:fragment="changediv">
						    <div class="row" th:each="goods:${usergoods}">
							    <div class="col-sm-4">
							    	<img class="img-thumbnail goodsimg" th:attr="src=${goods.image}">
							    </div>
							    <div class="col-sm-8">
								    <ul>
										<li>标题：<span th:text="${goods.goodname}">19960</span>
										</li>
										
										<li>价格：<span th:text="${goods.price}">分文不取</span>元/小时
										</li>
										<li>数量：<span th:text="${goods.goodsnumber}">一路清风</span>
										</li>
										<li>时间：<span th:text="${goods.uptime}">一路清风</span>
										</li>
										<li>押金：<span th:text="${goods.deposit}">一路清风</span>
										</li>
										<li>描述：<span th:text="${goods.detail}">分文不取</span></li>									
									</ul>
									<div class="btn-group pull-right" role="group" >
									  <button type="button" class="btn btn-info" th:onclick="deleteusergoods([[${goods.goodid}]],[[${session.user.username}]])" th:if="${goods.status} eq 1">下架</button>
									  <button type="button" class="btn btn-info" th:onclick="showupdatemodal([[${goods}]])" th:if="${goods.status} eq 1">修改</button>
									   <span class="label label-success" th:if="${goods.status} eq 3">等待审核</span>
	                                    <span class="label label-danger" th:if="${goods.status} eq 2" th:text="${goods.notify}">审核不通过</span>
	                                    <span class="label label-default" th:if="${goods.status} eq 0">物品已下架</span>
									</div>
							    </div>
						    </div>
						    
						  </div><!--changediv  -->
					  </div>
					</div>
					
				</div>
				<!-- 物品管理 -->

				<!-- 订单记录 -->
				<div role="tabpanel" class="tab-pane" id="record" >

					<ul class="nav nav-tabs" role="tablist">
						<li role="presentation" class="active">
						<a href="#notendborrow"
							aria-controls="notendborrow" role="tab" data-toggle="tab">未还账单</a></li>
						<li role="presentation"><a href="#finish"
							aria-controls="finish" role="tab" data-toggle="tab">历史记录</a></li>

					</ul>

					<!-- Tab panes -->
					<div class="tab-content" id="historyborrow" th:fragment="historyborrow">
					
						<div role="tabpanel" class="tab-pane active" id="notendborrow">
							<div class="row" th:each="borrow:${borrows}">
								<div class="col-sm-5">
									<a href="#"> <img class="img-rounded perimg" src="images/1.jpg" th:attr="src=${borrow.image}"
										alt="图片未显示">
									</a>
								</div>
								<div class="col-sm-7">
									<h4 class="media-heading" th:text="${borrow.subject}">标题</h4>

									<ul>
										<li>订单编号：<span th:text="${borrow.out_trade_no}" id="borrowid">19970424</span>
										</li>
										<li>租借时间：<span th:text="${borrow.borrowtime}">19970424</span>
										</li>
										<li>计费方式：<span th:text="${borrow.depositMoney}+'元/小时'">3</span>
										</li>
										<li>押金：<span th:text="${borrow.deposit}">分文不取</span>
										</li>
										<li>租借者：<span th:text="${borrow.username}">分文不取</span>
										</li>

									</ul>

									<button class="btn btn-info pull-right" type="button"  th:onclick="returnborrow([[${borrow}]])">退还</button>
								</div>
							</div>

						</div>
						<div role="tabpanel" class="tab-pane" id="finish">
							<div class="media" th:each=" borrow:${endBorrows}">
								<div class="media-left">
									<a href="#"> <img class="perimg" src="images/1.jpg" th:attr="src=${borrow.image}"
										alt="图片未显示">
									</a>
								</div>
								<div class="media-body">
									<h4 class="media-heading" th:text="${borrow.subject}">标题</h4>

									<ul>
										<li>订单编号：<span th:text="${borrow.out_trade_no}">19960</span>
										</li>
										
										<li>租借者：<span th:text="${borrow.username}">分文不取</span>
										</li>
										<li>租借时间：<span th:text="${borrow.borrowtime}">一路清风</span>
										</li>
										<li>交还时间：<span th:text="${borrow.repey}">分文不取</span></li>
										<li>计费方式：<span th:text="${borrow.depositMoney+'元/小时'}">分文不取</span></li>
										<li>租借费用：<span th:text="${borrow.amount}">分文不取</span></li>
										<li>退还押金：<span th:text="${borrow.deposit}">分文不取</span>
										</li>

									</ul>

								</div>
							</div>

						</div>

					</div>
				</div>
				<!-- 订单记录 -->
			</div>
		</div>

	</div>


		<!-- 租赁物品退还model -->
		<div class="modal fade" id="returnmodel"  tabindex="-1" role="dialog">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title">退还物品</h4>
		      </div>
		      <div class="modal-body">
		       
		        <form class="form-horizontal" id="returnform">
                   <div class="form-group">
                     <label for="inputname2" class="col-sm-2 control-label">标题</label>
                     <div class="col-sm-8 input-group">
                       <input type="text" class="form-control" name="subject"  id="subject" readonly="readonly">
                     </div>
                     <p class="col-sm-2 hidden" id="namewrong"></p>
                   </div>


                   <div class="form-group">
                     <label for="out_trade_no" class="col-sm-2 control-label">订单编号</label>
                     <div class="col-sm-8 input-group">
                       <input type="text" class="form-control" name="out_trade_no" id="out_trade_no" readonly="readonly">
                     </div>
                   </div>

                   <div class="form-group">
                           <label for="username" class="col-sm-2 control-label">租借者</label>
                           <div class="col-sm-8 input-group">
                             <input type="text" class="form-control" name="username" id="username" readonly="readonly">
                           </div>
                   </div>

                   

                   <div class="form-group">
                           <label for="inputemail" class="col-sm-2 control-label">租借时间</label>
                           <div class="col-sm-8 input-group">
                             <input type="text" class="form-control" name="borrowtime" id="borrowtime" readonly="readonly">
                           </div>
                   </div>

                   <div class="form-group">
                           <label for="inputtel" class="col-sm-2 control-label">归还时间</label>
                           <div class="col-sm-8 input-group">
                             <input type="text" class="form-control" name="repey" id="repey">
                           </div>
                   </div>
                    <div class="form-group">
                           <label for="inputtel" class="col-sm-2 control-label">计费标准</label>
                           <div class="col-sm-8 input-group">
                             <input type="text" class="form-control" name="depositMoney" id="depositMoney" readonly="readonly">
                             <div class="input-group-addon">元/小时</div>
                           </div>
                   </div>
                   <div class="form-group">
                           <label for="inputtel" class="col-sm-2 control-label">租借费用</label>
                           <div class="col-sm-8 input-group">
                             <input type="text" class="form-control" name="amount" id="amount" readonly="readonly">
                              <div class="input-group-addon">元</div>
                           </div>
                   </div>
                   <div class="form-group">
                           <label for="inputtel" class="col-sm-2 control-label">退还押金</label>
                           <div class="col-sm-8 input-group">
                             <input type="text" class="form-control" name="deposit" id="deposit2" readonly="readonly">
                           </div>
                   </div>
                    <div class="form-group">
                           
                           <div class="col-sm-8 input-group">
                             <input type="hidden" class="form-control" name="goodid" id="returngoodid" >
                           </div>
                   </div>
                   <div class="form-group">
                     <div class="col-sm-offset-2 col-sm-8">
                       <button type="botton" class="btn btn-info center-block" id="paybtn">确定</button>
                     </div>
                   </div>
                 </form>
		       
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		   
		      </div>
		    </div><!-- /.modal-content -->
		  </div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
		<!-- 租赁物品退还model -->
		
		
		<!-- 图片裁剪modal -->
			 <div class="modal fade" id="imgcrop" tabindex="-1" role="dialog" >
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">上传图片</h4>
                </div>
                <div class="modal-body">
                        <form class="form-inline">
                                <div class="form-group">
                                    <input type="file"  id="InputFile" accept=".png,.jpg,.gif">       
                                </div>
                         </form>
                    <div class="row" style=" margin-top:  10px;"> 
                        
                        <div class="col-sm-8">
                            <div class="img-container">
                                <img id="TrimImage" src="" alt="" >
                            </div>
                        </div>
                        <div class="col-sm-4 hidden-xs">
                            <h4>预览：</h4>
                            <div class="preview">

                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-xs-8">
                             	
                        </div>
                        <div class="col-xs-4">
                                <button class="btn btn-primary"  id="saveimg" th:onClick="saveImg()">确定</button>
                        </div>
                    </div>
                
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

		<!-- 图片裁剪modal -->
		
		
		<!-- 物品修改modal -->
		 <div class="modal fade" id="updatagoodsmodal" tabindex="-1" role="dialog" >
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">物品修改</h4>
                </div>
                <div class="modal-body">
                         <form class="form-horizontal" id="updatagoodsform">
					                   <div class="form-group">
					                     <label for="inputname2" class="col-xs-3 control-label">标题</label>
					                     <div class=" input-group col-xs-7">
					                       <input type="text" class="form-control " name="goodname">
					                     </div>
					                   </div>
					
					                    <div class="form-group">
					                           <label for="inputtel" class="col-xs-3 control-label">价格</label>
					                           <div class=" input-group col-xs-7">
					                             <input type="text" class="form-control" name="price" placeholder="元/小时">
					                             
					                           </div>
					                   </div>
					              		<div class="form-group">
					                           <label for="inputtel" class="col-xs-3 control-label">数量</label>
					                           <div class="input-group col-xs-7">
					                             <input type="text" class="form-control" name="goodsnumber"> 
					                           </div>
					                   </div>
					                   
					                   <div class="form-group">
					                           <label for="inputtel" class="col-xs-3 control-label">押金</label>
					                           <div class="input-group col-xs-7">
					                             <input type="text" class="form-control" name="deposit"> 
					                           </div>
					                   </div>
					                   <div class="form-group">
					                           <label for="inputtel" class="col-xs-3 control-label">描述</label>
					                           <div class="input-group col-xs-7">
					                            <textarea class="form-control" rows="3" name="detail"></textarea>
					                           </div>
					                   </div>
					                   <div class="form-group">
					                        
					                           <div class="input-group col-xs-7">
					                             <input type="hidden" class="form-control" name="goodid" > 
					                           </div>
					                   </div>
					                   <div class="form-group">
					                        
					                           <div class="input-group col-xs-7">
					                             <input type="hidden" class="form-control" name="username" th:attr="value=${session.user.username}"> 
					                           </div>
					                   </div>
					                   <div class="form-group">
					                     <div class="">
					                       <button type="button" class="btn btn-info center-block"  th:onclick="updatausergoods([[${session.user.username}]])">保存</button>
					                     </div>
					                   </div>
					                 </form>
                		</div>
                <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
		<!-- 物品信息修改modal -->

	<br>

	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.ias.js"></script>
	<script src="js/personal.js"></script>
	<script src="js/bootstrapValidator.js"></script>
	<script src="js/cropper.js"></script>
	
	
</body>

</html>